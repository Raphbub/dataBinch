install.packages(c("igraph", "qgraph", "sna", "cluster", "reshape2"))
install.packages(c("sp", "spdep"))
library("RJSONIO")
library("cluster")
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique)
binchDist <- as.matrix(binchUnique[,-1])
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
binches <- fromJSON("binches.json")
setwd("dataBinch")
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique)
binchDist <- as.matrix(binchUnique[,-1])
View(binchDist)
dist <- daisy(binchDist, metric = "gower")
binchUnique <- unique(binchUnique, incomparables = FALSE)
binchUnique <- unique(binchUnique, incomparables = TRUE)
View(binchUnique)
binchDist <- binchUnique[,-1]
dist <- daisy(binchDist, metric = "gower")
dist <- daisy(binchDist, metric = "gower")
dist <- daisy(binchDist, metric = "gower")
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
View(dist)
binchDist$ABV <- as.numeric(binchDist$ABV)
View(binchDist)
binchDist <- binchUnique[,-1]
View(binchDist)
binchDist$ABV <- as.double(binchDist$ABV)
binchDist <- binchUnique[,-1]
replace(".",binchDist$ABV,",")
binchDist$ABV <- as.numeric(binchDist$ABV)
binchDist$ABV <- factor(binchDist$ABV)
View(binchDist)
binchDist <- binchUnique[,-1]
View(binchDist)
binchDist$ABV <- as.numeric(as.character(sub("," , ".", binchDist$ABV)))
binchDist$IBU <- as.numeric(as.character(sub("," , ".", binchDist$IBU)))
binchDist$SRM <- as.numeric(as.character(sub("," , ".", binchDist$SRM)))
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
View(dist)
View(binchUnique)
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique, incomparables = FALSE)
binchDist <- binchUnique[,-1]
binchDist$ABV <- as.numeric(as.character(sub("," , ".", binchDist$ABV)))
binchDist$IBU <- as.numeric(as.character(sub("," , ".", binchDist$IBU)))
binchDist$SRM <- as.numeric(as.character(sub("," , ".", binchDist$SRM)))
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
View(dist)
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique, incomparables = FALSE)
binchDist <- binchUnique[,-1]
binchDist$ABV <- as.numeric(as.character(sub("," , ".", binchDist$ABV)))
binchDist$IBU <- as.numeric(as.character(sub("," , ".", binchDist$IBU)))
binchDist$SRM <- as.numeric(as.character(sub("," , ".", binchDist$SRM)))
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
View(dist)
write.csv(dist, file="binches_distance_matrix.csv")
setwd("dataBinch/data")
setwd("dataBinch\data")
setwd("dataBinch/data")
library("RJSONIO")
library("cluster")
library("igraph")
setwd("dataBinch")
setwd("dataBinch")
setwd("")
setwd("~/dataBinch")
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique, incomparables = FALSE)
binchDist <- binchUnique[,-1]
binchDist$ABV <- as.numeric(as.character(sub("," , ".", binchDist$ABV)))
binchDist$IBU <- as.numeric(as.character(sub("," , ".", binchDist$IBU)))
binchDist$SRM <- as.numeric(as.character(sub("," , ".", binchDist$SRM)))
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
json <- toJSON(dist, pretty = TRUE)
g <- graph.adjacency(dist, mode = "directed", weighted = TRUE)
e <- cbind( get.edgelist(g) , round( E(g)$weight, 3 ))
e <- as.data.frame(e)
colnames(e)[1]<-"Source"
colnames(e)[2]<-"Target"
colnames(e)[3]<-"Weight"
write.csv(e, file="rowdist.csv", row.names = FALSE)
View(e)
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique, incomparables = FALSE)
binchDist <- binchUnique[,-1]
binchDist$ABV <- as.numeric(as.character(sub("," , ".", binchDist$ABV)))
binchDist$IBU <- as.numeric(as.character(sub("," , ".", binchDist$IBU)))
binchDist$SRM <- as.numeric(as.character(sub("," , ".", binchDist$SRM)))
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
json <- toJSON(dist, pretty = TRUE)
g <- graph.adjacency(dist, mode = "directed", weighted = TRUE)
e <- cbind( get.edgelist(g) , round( E(g)$weight, 3 ))
e <- as.data.frame(e)
colnames(e)[1]<-"Source"
colnames(e)[2]<-"Target"
colnames(e)[3]<-"Weight"
write.csv(e, file="rowdist.csv", row.names = FALSE)
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique, incomparables = FALSE)
binchDist <- binchUnique[,-1]
binchDist$ABV <- as.numeric(as.character(sub("," , ".", binchDist$ABV)))
binchDist$IBU <- as.numeric(as.character(sub("," , ".", binchDist$IBU)))
binchDist$SRM <- as.numeric(as.character(sub("," , ".", binchDist$SRM)))
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
json <- toJSON(dist, pretty = TRUE)
g <- graph.adjacency(dist, mode = "directed", weighted = TRUE)
e <- cbind( get.edgelist(g) , round( E(g)$weight, 3 ))
e <- as.data.frame(e)
colnames(e)[1]<-"Source"
colnames(e)[2]<-"Target"
colnames(e)[3]<-"Weight"
write.csv(e, file="rowdist.csv", row.names = FALSE)
