install.packages(c("igraph", "qgraph", "sna", "cluster", "reshape2"))
install.packages(c("sp", "spdep"))
setwd("dataBinch")
binches <- fromJSON("binches.json")
library("rjson", lib.loc="~/R/x86_64-pc-linux-gnu-library/3.2")
library("RJSONIO", lib.loc="~/R/x86_64-pc-linux-gnu-library/3.2")
detach("package:rjson", unload=TRUE)
binches <- fromJSON("binches.json")
binches <- lapply(binches, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
})
binches <- do.call("rbind", binches)
binches <- as.data.frame(binches)
binchUnique <- binches[,4:12]
binchUnique <- binchUnique[,-2]
binchUnique <- unique(binchUnique, incomparables = FALSE)
binchDist <- binchUnique[,-1]
binchDist$ABV <- as.numeric(as.character(sub("," , ".", binchDist$ABV)))
binchDist$IBU <- as.numeric(as.character(sub("," , ".", binchDist$IBU)))
binchDist$SRM <- as.numeric(as.character(sub("," , ".", binchDist$SRM)))
library("cluster", lib.loc="~/R/x86_64-pc-linux-gnu-library/3.2")
dist <- daisy(binchDist, metric = "gower")
dist <- as.matrix(dist)
rownames(dist) <- binchUnique[,1]
colnames(dist) <- binchUnique[,1]
toJSON(dist)
toJSON(dist, pretty = TRUE)
json <- toJSON(dist, pretty = TRUE)
write(json, file = "matrix.json")
